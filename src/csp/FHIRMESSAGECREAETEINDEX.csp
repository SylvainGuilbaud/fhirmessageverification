<!DOCTYPE html>
<html>
<head>
    
    <link rel="stylesheet" href="css/jsoneditor.css"/>
   

    <title>FHIR|R4 MESSAGE CREATE</title>

    <style>
        body {
          padding: 0 70px;
        }
        #json {
          margin: 10px 10px 10px 32px;
          width: 50%;
          min-height: 70px;
        }
        h1 {
          font-family: Arial;
          color: #EBBC6E;
          text-align: center;
          text-shadow: 1px 1px 1px black;
          border-bottom: 1px solid gray;
          padding-bottom: 50px;
          width: 500px;
          margin: 20px auto;
        }
        h1 img {
          float: left;
        }
        h1 b {
          color: black;
          font-weight: normal;
          display: block;
          font-size: 12px;
          text-shadow: none;
        }

        #legend {
          display: inline;
          margin-left: 30px;
        }
        #legend h2 {
           display: inline;
           font-size: 18px;
           margin-right: 20px;
        }
        #legend a {
          color: white;
          margin-right: 20px;
        }
        #legend span {
          padding: 2px 4px;
          -webkit-border-radius: 5px;
          -moz-border-radius: 5px;
          border-radius: 5px;
          color: white;
          font-weight: bold;
          text-shadow: 1px 1px 1px black;
          background-color: black;
        }
        #legend .string  { background-color: #009408; }
        #legend .array   { background-color: #2D5B89; }
        #legend .object  { background-color: #E17000; }
        #legend .number  { background-color: #497B8D; }
        #legend .boolean { background-color: #B1C639; }
        #legend .null    { background-color: #B1C639; }

        #expander {
          cursor: pointer;
          margin-right: 20px;
        }

        #footer {
          font-size: 13px;
        }

        #rest {
          margin: 20px 0 20px 30px;
        }
        #rest label {
          font-weight: bold;
        }
        #rest-callback {
          width: 70px;
        }
        #rest-url {
          width: 700px;
        }
        label[for="json"] {
          margin-left: 30px;
          display: block;
        }
        #json-note {
          margin-left: 30px;
          font-size: 12px;
        }

        .addthis_toolbox {
          position: relative;
          top: -10px;
          margin-left: 30px;
        }

        #disqus_thread {
          margin-top: 50px;
          padding-top: 20px;
          padding-bottom: 20px;
          border-top: 1px solid gray;
          border-bottom: 1px solid gray;
        }


     body,P{margin:0;padding:0;}
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9999;
        }
 
        .popup-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
           
            width: 1160px;
            height: 635px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
            text-align: center;
            max-width: 80%;
            overflow: auto;
            max-height: 80%;
        }
 
        .popup-close {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 20px;
            color: #aaa;
            cursor: pointer;
        }
        .popup-inner li{margin-bottom: 6px;}
        .popup-inner li p{ display:inline-block; width: 350px; height: 58px; background-color: #e1deff; border: 1px solid #f6faff; font-size: 20px; line-height: 58px; text-align: center; color: #645488; border-radius: 7px;}
        .popup-inner div{font-weight: bold; color: #fff;}
        .popup-inner div p{ display:inline-block;}
        .popup-inner ul{padding-top: 25px; margin-bottom: 25px;}
        .popup-inner h2{font-size: 35px; color: #9f7cf1;}
        .popup-close{font-size: 45px;}
        li{list-style-type: none;}
        a{text-decoration: none; color: #f7eeee; font-weight: bold;}
        span{font-weight: bold; color: #f7eeee;}

    </style>

    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-5029684-7']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</head>

<body>
    <h1>
        FHIR|R4 MESSAGE CREATE
    </h1>
    
  

    <div id="rest">
        <select id="namelist"></select>
        <button onclick="getJSONTOSTRING()">ok</button>
    </div>
    <pre id="path"></pre>
    <div id="editor" class="json-editor"></div>


    <textarea id="json"></textarea><br/>

<div class="popup" id="popup">
        <div class="popup-inner"> <span class="popup-close" onclick="closePopup()">&times;</span>
            <h2>请选择需要添加的节点</h2>
            <!-- <p>自定义弹窗内容</p> -->
            <ul>
                <li class="pop1" id="pop1"></li>
            </ul>
            <div id="pop_1_box">
                
            </div>
            
        </div>
    </div>


    <script src="js/json2.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery.jsoneditornew.js"></script>
    <script src="js/jsoneditor.js"></script>
    <script>
    function getlist(){
	     $.ajax('http://'+window.location.host+'/fhirMessageVerification/GetResourceNameList',
	      {

                method: 'POST',

                data: {  },
                success: function (result) {
                   result = JSON.parse(result)
                    var sel = document.getElementById("namelist");
                    for (var key in result)
                    {
	                    var opt = new Option( result[key], result[key]);//第一个代表标签内的内容，第二个代表value
				        sel.options.add(opt);
	                 }
                          
                },
                error: function (err) {
                    console.log(err);
                }
            })


        }
	    
	
    function getJSONTOSTRING() {
            json1 = $('#json').val()
            resultArray=[]
            $.ajax('http://'+window.location.host+'/fhirMessageVerification/getJSON', {

                method: 'POST',

                data: {"rType":$('#namelist').val()  },
                success: function (result) {
                   result = JSON.parse(result)
                    //var newdata = JSON.parse(json1)
                    //console.log(result)
                           $('#json').val(JSON.stringify(result.json, undefined, 2))
                       $('#editor').jsonEditor(JSON.parse($('#json').val()), { change: updateJSON, propertyclick: showPath });
                   // $('#result').html(syntaxHighlight(newdata, resultArray));


                },
                error: function (err) {
                    console.log(err);
                }
            })


        }
         function closePopup() {
            document.getElementById("popup").style.display = "none";
        }
getlist()


    </script>
</body>
</html>
